(function($){var _ajax=$.ajax;$.ajax=function(s){var old=s.success;s.success=function(data,textStatus,jqXHR){if(data&&data.IsLogout){eval(data.Callback)}if(old){old(data,textStatus,jqXHR)}};_ajax(s)}})(jQuery);String.prototype.format=function(){var b=this;for(var a=0;a<arguments.length;a++){b=b.replace("{"+a+"}",arguments[a])}return b};String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"gm"),b)};Function.prototype.getMultiLine=function(){var a=new String(this);a=a.substring(a.indexOf("/*")+3,a.lastIndexOf("*/"));return a};Array.prototype.AsDelimited=function(a){var c="";for(var b=0;b<this.length;b++){if(c.length>0){c+=a}c+=this[b]}return c};Array.prototype.del=function(c){var b=[];if(c.constructor==Function){for(var a=0;a<this.length;a++){if(c(this[a])!=true){b.push(this[a])}}}else{for(var a=0;a<this.length;a++){if(this[a]!=c){b.push(this[a])}}}return b};Array.prototype.contains=function(b){if(b.constructor==Function){for(var a=0;a<this.length;a++){if(b(this[a])==true){return true}}}else{for(var a=0;a<this.length;a++){if(this[a]==b){return true}}}return false};Number.prototype.toPrice=function(d){var c=this.toString().replace(/\$|\,/g,"");if(isNaN(c)){c="0"}var e=(c==(c=Math.abs(c)));c=Math.floor(c*100+0.50000000001);var a=c%100;c=Math.floor(c/100).toString();if(a<10){a="0"+a}for(var b=0;b<Math.floor((c.length-(1+b))/3);b++){c=c.substring(0,c.length-(4*b+3))+","+c.substring(c.length-(4*b+3))}return(((typeof d!="undefined")?d:"￥")+((e)?"":"-")+c+"."+a)};String.prototype.toDecimal=function(a){var c=this.toString().replace(/[^\d\.\-]/g,"");var b=typeof a=="undefined"?2:a;return parseFloat(c).toFixed(b)};function checkRate(a){var b=/^[0-9]+.?[0-9]*$/;if(!b.test(a)){return false}return true}function clearNoNum(a){a.value+="";a.value=a.value.replace(/[^0-9|\.]/g,"");if(/^0+/){a.value=a.value.replace(/^0+/,"")}if(!/\./.test(a.value)){a.value+=".00"}if(/^\./.test(a.value)){a.value="0"+a.value}a.value+="00";a.value=a.value.match(/\d+\.\d{2}/)[0]}$.fn.Accordion=function(d){var e={title:"",active:0,collapsible:false,disabled:false,header:"h5",event:"click",heightStyle:"",icons:"",activate:function(g,h){},beforeActivate:function(g,h){},create:function(g,h){}};var b=$(this);var f='<div class="tit_dispay tit_dispay_2">     <div class="more10r m5_t"><span class="btn_arrow btn_tableup"></span></div>     <{header} class="accordingtitle"><span class="{icon}"></span>{title}</{header}> </div>';e=$.extend(e,d);var c=Math.round((Math.random(100)*10000)/100);function a(){b.each(function(h,g){g=$(g);if(!!g.attr("init")){return}var j="";if(e.title.length==0){j=(g.attr("title")==null)?"未设置标题":g.attr("title")}var i=null;while(!(i!=null&&$("#"+i).length==0)){i="accordion_"+(g.attr("id")==null?Math.round((Math.random(10000)*1000000)):g.attr("id"))}var k=f;k=k.replace("{title}",j);k=k.replace("{icon}",e.icons);k=k.replace("{header}",e.header);k=k.replace("{header}",e.header);g.before('<div group="'+c+'" id="'+i+'" accourdIndex="'+h+'">'+k+"</div>");g.addClass(e.heightStyle);$("#"+i).append(g);if(!e.disabled){$("#"+i+" .tit_dispay").live(e.event,function(l){e.beforeActivate(l,g);if(e.collapsible){$("div[group='"+c+"'] div.tit_dispay:visible").next().hide();$("div[group='"+c+"'] div.tit_dispay:visible").children().children("span.btn_tableup").addClass("btn_tabledown").removeClass("btn_tableup")}var m=$("span",this);if(g.is(":visible")){m.removeClass("btn_tableup");m.addClass("btn_tabledown");g.hide()}else{m.removeClass("btn_tabledown");m.addClass("btn_tableup");g.show()}e.activate(h,g);return false})}if(e.collapsible){if(h==e.active){g.show();$("#"+i+" .tit_dispay span:eq(0)").removeClass("btn_tabledown");$("#"+i+" .tit_dispay span:eq(0)").addClass("btn_tableup")}else{g.hide();$("#"+i+" .tit_dispay span:eq(0)").removeClass("btn_tableup");$("#"+i+" .tit_dispay span:eq(0)").addClass("btn_tabledown")}}e.create(h,g);g.attr("title",null);g.attr("init",true)})}a();this.Active=function(g){$("div[group='"+c+"'] div.tit_dispay").next().hide();$("div[group='"+c+"'] div.tit_dispay:visible").children(":first").children(":first").trigger(e.event);return true};return this};$.fn.JsonBind=function(data){if(data!=null){for(var column in data){$("*[dn='"+column+"']",this).each(function(i,e){UI.BindDataToElement($(e),data[column])})}}else{if(typeof(data)=="undefined"){var jsonData={};$("[dn]",this).each(function(i,e){eval("jsonData."+$(e).attr("dn")+" = null;");jsonData[$(e).attr("dn")]=getData($(e))});return jsonData}else{$("[dn]",this).each(function(i,e){UI.BindDataToElement($(e),"")})}}function getData(element){var tagName=element[0].tagName.toLocaleLowerCase();if(tagName=="input"&&element.attr("type")=="text"){return element.val()}else{if(tagName=="input"&&element.attr("type")=="checkbox"){return(element.attr("checked")!=null)}else{if(tagName=="input"&&element.attr("type")=="hidden"){return element.val()}else{if(tagName=="select"){return element.val()}else{if(tagName=="textarea"){return element.val()}else{if(tagName=="img"){return element.attr("src")}else{return element.html()}}}}}}}return true};$.fn.defaultValue=function(a){$(this).data("dv",a);$(this).focus(function(){if($.trim($(this).val())==$(this).data("dv")){$(this).val("")}}).blur(function(){if($.trim($(this).val())==""){$(this).val($(this).data("dv"))}});if($.trim($(this).val())==""){$(this).val($(this).data("dv"))}};$.fn.numberInput=function(){$(this).blur(function(){this.value=this.value.replace(/[^\.\d]/g,"")});$(this).bind("keyup",function(){this.value=this.value.replace(/[^\.\d]/g,"")})};$.fn.textareaInput=function(a){$(this).blur(function(){if(this.value.length>a){this.value=this.value.substring(0,a)}})};$.fn.ajaxLoadingMask=function(a){var b=$(this);$(b).ajaxStart(function(){b.data=UI.Mask({obj:b,zindex:9999});if(a){$(b).find("button").attr("disabled","disabled");$(b).find("input[type=button]").attr("disabled","disabled")}});$(b).ajaxStop(function(){if(b.data!=null&&$.isFunction(b.data.Remove)){b.data.Remove()}if(a){$(b).find("button").removeAttr("disabled");$(b).find("input[type=button]").removeAttr("disabled")}})};var mvcParamMatch=(function(){var a={};a.isArray=Function.isArray||function(b){return typeof b==="object"&&Object.prototype.toString.call(b)==="[object Array]"};a.convertArrayToObject=function(c,b,f){var e=f||{};function d(l,g){for(var h in g){if(!a.isArray(g[h])&&typeof g[h]==="object"){for(var k in g[h]){if(a.isArray(g[h][k])){d(l+"["+h+"]."+k,g[h][k])}else{if(typeof g[h][k]==="object"){a.convertObject(l+"["+h+"]."+k+".",g[h][k],e)}else{if(typeof g[h][k]!=="function"){e[l+"["+h+"]."+k]=g[h][k]}}}}}else{if(typeof g[h]!=="function"){e[l+"["+h+"]"]=g[h]}}}}d(c,b);return e};a.convertObject=function(d,f,e){var c=e||{};function b(h,j){for(var g in j){if(a.isArray(j[g])){a.convertArrayToObject(g,j[g],c)}else{if(typeof j[g]==="object"){b(h+g+".",j[g])}else{if(typeof j[g]!=="function"){c[h+g]=j[g]}}}}}b(d,f);return c};return function(c,b){b=b||"";if(typeof c!=="object"){throw new Error("请传入json对象")}if(a.isArray(c)&&!b){throw new Error("请指定数组名，对应Action中数组参数名称！")}if(a.isArray(c)){return a.convertArrayToObject(b,c)}return a.convertObject("",c)}})();function transJsonDate(jsonDate,formatString){if(jsonDate==""||jsonDate==null){return""}if(formatString==null){formatString="yyyy-MM-dd HH:mm:ss"}var jsonDate=jsonDate.toString();var date=jsonDate.replace(/\//gi,"");var d;eval("d = new "+date+";");return FormatDateToString(d,formatString)}function FormatDateToString(x,y){var z={M:x.getMonth()+1,d:x.getDate(),h:x.getHours()%12==0?12:x.getHours()%12,m:x.getMinutes(),s:x.getSeconds(),H:x.getHours(),S:("000").substring(0,3-x.getMilliseconds().toString().length)+x.getMilliseconds()};y=y.replace(/(M+|d+|h+|m+|s+|H+|S{1,3})/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(0-v.length)});return y.replace(/(y+)/g,function(v){return x.getFullYear().toString().slice(-v.length)})}function DateDiff(e,f){var a,c,d,b;a=e.split("-");c=new Date(a[1]+"-"+a[2]+"-"+a[0]);a=f.split("-");d=new Date(a[1]+"-"+a[2]+"-"+a[0]);b=parseInt(Math.abs(c-d)/1000/60/60/24);return b}(function(b,d,c){var a=d.DTS=function(f,e){return new DTS.fn.Init(f,e)};DTS.fn=DTS.prototype={Init:function(f,e){this.options=$.extend(DTS.defOptions,e);this.tableWrap=$(f);this.objects={$scrollWrap:null,$scrollContent:null,$tableBodyWrap:null,$tableContent:null};this.Init()}};DTS.fn.Init.prototype={Init:function(){this.ScrollWrap();this.objects={$scrollWrap:this.tableWrap.find(".scrollwrap"),$scrollContent:this.tableWrap.find(".scrollcontent"),$tableBodyWrap:this.tableWrap.find(".table-body"),$tableContent:this.tableWrap.find(".table-body table")};this.tableWrap.css({position:"relative",width:this.options.width});this.objects.$tableBodyWrap.css({position:"absolute",width:"100%",overflow:"hidden"});var g=this.tableWrap,e=this.objects,f=this.options;setTimeout(function(){DTS.SetHeight(g,e,f)},50);this.RegEvent()},ScrollWrap:function(){if(this.tableWrap.find(".scrollwrap").length==0){$('<div class="scrollwrap tablescrollwrap"><div class="scrollcontent"></div></div>').css({position:"absolute",top:this.options.headerHeight+"px",right:"0",zIndex:"1",overflowX:"hidden",overflowY:"scroll"}).prependTo(this.tableWrap)}},InRuleHeight:function(e){if(typeof e!=="undefined"){this.options.inRuleHeight=e;DTS.SetHeight(this.tableWrap,this.objects,this.options)}else{return this.options.inRuleHeight}},OutRuleHeight:function(e){if(typeof e!=="undefined"){this.options.outRuleHeight=e;DTS.SetHeight(this.tableWrap,this.objects,this.options)}else{return this.options.outRuleHeight}},RegEvent:function(){var g=this.tableWrap,e=this.objects,f=this.options;g.mousewheel(function(i,h){var j=g.find(".table-body table tr:first").height();if(h>0){e.$tableBodyWrap.scrollTop(e.$tableBodyWrap.scrollTop()-(j*f.scrollSetp))}else{e.$tableBodyWrap.scrollTop(e.$tableBodyWrap.scrollTop()+(j*f.scrollSetp))}e.$scrollWrap.scrollTop(e.$tableBodyWrap.scrollTop())});e.$scrollWrap.scroll(function(){e.$tableBodyWrap.scrollTop($(this).scrollTop())});$(d).resize(function(){DTS.SetHeight(g,e,f)})},ReInit:function(){this.ScrollWrap();this.objects={$scrollWrap:this.tableWrap.find(".scrollwrap"),$scrollContent:this.tableWrap.find(".scrollcontent"),$tableBodyWrap:this.tableWrap.find(".table-body"),$tableContent:this.tableWrap.find(".table-body table")};this.tableWrap.css({position:"relative",width:this.options.width});this.objects.$tableBodyWrap.css({position:"absolute",width:"100%",overflow:"hidden"});DTS.SetHeight(this.tableWrap,this.objects,this.options);this.RegEvent()}};DTS.SetHeight=function(h,e,f){var g=$(d).height()-f.outRuleHeight-f.inRuleHeight;h.css({height:g+"px"});e.$tableBodyWrap.css({top:f.headerHeight+"px",height:(g-f.headerHeight-f.inRuleHeight)+"px"});e.$scrollWrap.css("height",(g-f.headerHeight-f.inRuleHeight)+"px");e.$scrollContent.css({height:e.$tableContent.height()+"px",lineHeight:e.$tableContent.height()+"px",width:"1px"})};DTS.defOptions={headerHeight:0,inRuleHeight:0,outRuleHeight:0,scrollSetp:5,width:"100%"}})($,this);String.prototype.Coding=function(){this.encode=function(){return escape(this._utf8_encode(this))};this.decode=function(c){return this._utf8_decode(unescape(this))};function b(f){f=f.replace(/\r\n/g,"\n");var g="";for(var e=0;e<f.length;e++){var d=f.charCodeAt(e);if(d<128){g+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){g+=String.fromCharCode((d>>6)|192);g+=String.fromCharCode((d&63)|128)}else{g+=String.fromCharCode((d>>12)|224);g+=String.fromCharCode(((d>>6)&63)|128);g+=String.fromCharCode((d&63)|128)}}}return g}function a(g){var f="";var e=0;var d=c1=c2=0;while(e<g.length){d=g.charCodeAt(e);if(d<128){f+=String.fromCharCode(d);e++}else{if((d>191)&&(d<224)){c2=g.charCodeAt(e+1);f+=String.fromCharCode(((d&31)<<6)|(c2&63));e+=2}else{c2=g.charCodeAt(e+1);c3=g.charCodeAt(e+2);f+=String.fromCharCode(((d&15)<<12)|((c2&63)<<6)|(c3&63));e+=3}}}return f}};String.prototype.encode=function(b){function a(f){f=f.replace(/\r\n/g,"\n");var g="";for(var e=0;e<f.length;e++){var d=f.charCodeAt(e);if(d<128){g+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){g+=String.fromCharCode((d>>6)|192);g+=String.fromCharCode((d&63)|128)}else{g+=String.fromCharCode((d>>12)|224);g+=String.fromCharCode(((d>>6)&63)|128);g+=String.fromCharCode((d&63)|128)}}}return g}if(!!b&&b.toLocaleLowerCase()=="utf8"){return escape(a(this.toString()))}else{return escape(this.toString())}};String.prototype.decode=function(b){function a(g){var f="";var e=0;var d=c1=c2=0;while(e<g.length){d=g.charCodeAt(e);if(d<128){f+=String.fromCharCode(d);e++}else{if((d>191)&&(d<224)){c2=g.charCodeAt(e+1);f+=String.fromCharCode(((d&31)<<6)|(c2&63));e+=2}else{c2=g.charCodeAt(e+1);c3=g.charCodeAt(e+2);f+=String.fromCharCode(((d&15)<<12)|((c2&63)<<6)|(c3&63));e+=3}}}return f}if(!!b&&b.toLocaleLowerCase()=="utf8"){return a(unescape(this.toString()))}else{return unescape(this.toString())}};